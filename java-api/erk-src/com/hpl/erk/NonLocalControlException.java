/*
 *
 *  Managed Data Structures
 *  Copyright Â© 2016 Hewlett Packard Enterprise Development Company LP.
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Lesser General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 *  As an exception, the copyright holders of this Library grant you permission
 *  to (i) compile an Application with the Library, and (ii) distribute the 
 *  Application containing code generated by the Library and added to the 
 *  Application during this compilation process under terms of your choice, 
 *  provided you also meet the terms and conditions of the Application license.
 *
 */

package com.hpl.erk;

/**
 * An {@link Exception} that is cheap to throw, and hence usable when
 * exception handling is being used for execution control rather than to 
 * signal an actual exceptional condition.  The way this is accomplished is
 * by having {@link #fillInStackTrace()} not actually do any work (this is
 * the expensive part of exception handling), so it's <b>really</b> important
 * that any such exceptions actually be caught, because otherwise there will
 * be no information about where they were thrown from.  But when you can make
 * such a guarantee, you can avoid having to have lots of code that checks
 * for error conditions and handles them accordingly.
 * <p>
 * {@link NonLocalControlException} extends {@link Exception}, so these need
 * to be declared at each level.  A sister class, {@link NonLocalControlRuntimeException}
 * extends {@link RuntimeException} and so can pass through methods that don't know 
 * about it, but you need to be a lot more careful using it, because there's no
 * warning that it needs to be caught.
 */
public class NonLocalControlException extends Exception {

  private static final long serialVersionUID = 1785838958061167649L;

  public NonLocalControlException() {
    super();
  }

  public NonLocalControlException(String message) {
    super(message);
  }

  public NonLocalControlException(Throwable cause) {
    super(cause);
  }

  public NonLocalControlException(String message, Throwable cause) {
    super(message, cause);
  }

  public NonLocalControlException(String message, Throwable cause,
                                  boolean enableSuppression,
                                  boolean writableStackTrace) {
    super(message, cause, enableSuppression, writableStackTrace);
  }

  @Override
  public synchronized Throwable fillInStackTrace() {
    /* 
     * Since we're using this for control rather than for error handling,
     * there's no place wasting time filling in a stack trace that nobody
     * will ever look at.  This means that it's really important that this
     * exception not be uncaught, at least not in any way that causes
     * anybody to care about where it was thrown.
     * 
     */
    return this;
  }

}